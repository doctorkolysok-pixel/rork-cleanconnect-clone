# ‚úÖ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. ‚úÖ Backend/tRPC
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `protectedProcedure` –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS

### 2. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ `backend/db/migrate.ts`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

### 3. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω `START_BACKEND.md` —Å –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π

---

## üöÄ –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨ (3 –∫–æ–º–∞–Ω–¥—ã):

### 1. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```bash
bun backend/db/migrate.ts
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend (–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ 1)
```bash
bun server/index.ts
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ 2)
```bash
bun run start
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ backend –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚úÖ –°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
üîó –ê–¥—Ä–µ—Å–∞:
   ‚Ä¢ –û—Å–Ω–æ–≤–Ω–æ–π: http://localhost:3000
   ‚Ä¢ tRPC API: http://localhost:3000/api/trpc
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ - **–≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!** üéâ

---

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ:

### `backend/trpc/create-context.ts`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Authorization header
- –î–æ–±–∞–≤–ª–µ–Ω `protectedProcedure` middleware
- –£–ª—É—á—à–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### `backend/hono.ts`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω CORS —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ headers
- –†–∞–∑—Ä–µ—à–µ–Ω—ã credentials –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ OPTIONS –º–µ—Ç–æ–¥–∞

### `backend/db/migrate.ts` (–ù–û–í–´–ô)
- –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

---

## –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "Failed to fetch":

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**: –ó–∞–ø—É—â–µ–Ω –ª–∏ backend?
   ```bash
   curl http://localhost:3000
   ```
   
2. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:
   ```bash
   # –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å backend –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
   # –ó–∞—Ç–µ–º —Å–Ω–æ–≤–∞:
   bun server/index.ts
   ```

3. **–ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞** - —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–Ω–æ–≤–æ:
   ```bash
   rm tazago.db
   bun backend/db/migrate.ts
   bun server/index.ts
   ```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
backend/
  ‚îú‚îÄ‚îÄ hono.ts                  # HTTP —Å–µ—Ä–≤–µ—Ä + CORS
  ‚îú‚îÄ‚îÄ trpc/
  ‚îÇ   ‚îú‚îÄ‚îÄ create-context.ts   # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (auth + protectedProcedure)
  ‚îÇ   ‚îú‚îÄ‚îÄ app-router.ts       # –†–æ—É—Ç–µ—Ä tRPC
  ‚îÇ   ‚îî‚îÄ‚îÄ routes/             # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
  ‚îî‚îÄ‚îÄ db/
      ‚îú‚îÄ‚îÄ index.ts            # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
      ‚îú‚îÄ‚îÄ schema.ts           # –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü
      ‚îî‚îÄ‚îÄ migrate.ts          # ‚úÖ –ù–û–í–´–ô (—Å–æ–∑–¥–∞–Ω–∏–µ –ë–î)

server/
  ‚îî‚îÄ‚îÄ index.ts                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è backend

lib/
  ‚îî‚îÄ‚îÄ trpc.ts                 # tRPC –∫–ª–∏–µ–Ω—Ç –¥–ª—è frontend
```

---

## üéØ –í—Å—ë –≥–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å:
1. ‚úÖ Backend –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. ‚úÖ CORS —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
3. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è
4. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ header
5. ‚úÖ –ï—Å—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã (protectedProcedure)

**–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞! üöÄ**
